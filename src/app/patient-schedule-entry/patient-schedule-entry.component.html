<div class="rounded-2xl flex drop-shadow m-2 p-2" style="background-color: hsl(185.45deg 31.43% 93.14%);">

  <div class="flex flex-col gap-5 w-1/2">
    <div class="cont-elevation flex gap-7 items-center py-4 px-5 cursor-pointer" (click)="navigateToPatientDetails()">
      <mat-icon class="icon-display" style="transform: scale(2);">account_circle</mat-icon>
      <p>{{appointment.patient.firstName}} {{appointment.patient.lastName}}</p> 
    </div>
    <div [class.visible-tgl]="!panelOpenState">Reason for Visit:  &nbsp; &nbsp;{{appointment.reasonForVisit}}</div>
  </div>

  <div class="spacer grow-[2]"></div>

  <div class="actions_nd_stats flex justify-end w-1/3 gap-2">
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
      style="border-radius: 0.7rem;">
      <!-- --------------------------- Flags & Main Actions -------------------------- -->
      <mat-expansion-panel-header class="specific-class">
        @if (appointment.latenessCtr > 0) {
          browse_gallery
          acute
          warning z
        }

        @if (appointment.isUrgent) {
          <img src="assets/images/alarm.gif" alt="Emergency" class="object-containss">
        }

        <div class="flex justify-center items-center gap-2">
          @if (appointment.patientInClinic) {
            <mat-icon class="icon-btn">where_to_vote</mat-icon>
          }
          @if (appointment.paid) {
            <mat-icon class="icon-btn mr-3">paid</mat-icon>
          }
        </div>
        
      </mat-expansion-panel-header>
      <!-- --------------------------- Actions -------------------------- -->
      <div class="flex gap-2 border-t-2 border-r-blue-300 pt-4">
        <button mat-mini-fab aria-label="Call Patient" class="rounded-full flex items-center justify-center p-1 shadow-md  bg-[#03a9f466] hover:bg-[#35BEFD]">
          <mat-icon>call</mat-icon>
        </button>
        <button mat-mini-fab aria-label="Send SMS to Patient" class="rounded-full flex items-center justify-center p-1 shadow-md  bg-[#03a9f466] hover:bg-[#35BEFD]">
          <mat-icon>sms</mat-icon>
        </button>
        <button mat-mini-fab aria-label="Patient on site toggle"  (click)="toggleOnSite()"
          class="rounded-full flex items-center justify-center p-1 shadow-md  bg-[#03a9f466] hover:bg-[#35BEFD]"
          [disabled]="updateOnSiteIsInProgress">
          <mat-icon>where_to_vote</mat-icon>
        </button>
        <button mat-mini-fab aria-label="Patient paid on site" (click)="togglePaid()"
          class="rounded-full flex items-center justify-center p-1 shadow-md  bg-[#03a9f466] hover:bg-[#35BEFD]"
          [disabled]="updatePaidIsInProgress">
          <mat-icon>paid</mat-icon>
        </button>
        <button mat-mini-fab aria-label="Emergency Toggle" (click)="toggleUrgent()"
          class="rounded-full flex items-center justify-center p-1 shadow-md  bg-[#03a9f466] hover:bg-[#35BEFD]"
          [disabled]="updateUrgencyInProgress">
          <!-- <mat-icon>f119</mat-icon> -->
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M200-160v-80h64l79-263q8-26 29.5-41.5T420-560h120q26 0 47.5 15.5T617-503l79 263h64v80H200Zm148-80h264l-72-240H420l-72 240Zm92-400v-200h80v200h-80Zm238 99-57-57 142-141 56 56-141 142Zm42 181v-80h200v80H720ZM282-541 141-683l56-56 142 141-57 57ZM40-360v-80h200v80H40Zm440 120Z"/></svg>
        </button>
      </div>
    </mat-expansion-panel>
  </div>
  
</div>